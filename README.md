# Sinan 司南

## 0. 描述

桌面端与web端的快速开发功能插件的框架。

## 1. 目标

1. [ ] 无畏更新
2. [ ] 功能开发与运行框架无关

## 2. 设计

整体分4层：运行框架层、封装层、内核层、应用层。

1. [ ] 运行框架
   1. [ ] Electron
   2. [ ] 现代浏览器
2. [ ] 应用
   1. [ ] Electron 主进程
   2. [ ] Web 服务
3. [ ] 插件
   1. [ ] 核心插件
   2. [ ] 普通插件
      1. [ ] 测试引擎插件

### 2.1 运行框架层

运行框架层就是实际提供的运行环境，比如Electron提供系统API、nodejs运行时等；浏览器提供js虚拟机等。

### 2.2 封装层

封装层就是对运行框架层的封装。

目标是实现对Electron和浏览器的封装。

#### 2.2.1 Electron 主进程

运行在 Electron 主进程，对Electron的封装层。

1. [ ] 加载核心插件
2. [ ] 核心插件无法加载/加载失败的处理

#### 2.2.2 Web 服务

服务在服务器；模拟运行在浏览器，对浏览器的封装层。

1. [ ] 发布管理软件与插件版本
2. [ ] 模拟运行插件
   1. [ ] 加载核心插件
   2. [ ] 核心插件无法加载/加载失败的处理

### 2.3 内核层

内核层运行在封装层之上，为应用层提供运行环境。

#### 2.3.1 核心插件

运行在主进程，负责处理主进程与渲染进程间通讯及其它API的封装，管理插件，管理插槽，作为普通插件运行的基础设施，运行主窗口。

1. [ ] 封装API
2. [ ] 主进程、渲染进程间通讯
3. [ ] 管理插件
4. [ ] 管理插槽
5. [ ] 普通插件运行的基础设施
6. [ ] 运行主窗口

### 2.4 应用层

应用层运行在内核层之上，未来具体的功能需求的主要开发工作将发生在应用层。

#### 2.4.1 普通插件

运行在核心插件提供的基础设施上

1. [ ] 加载
2. [ ] 运行在主窗口（带界面的插件）
3. [ ] 运行在单独子窗口（带界面的插件）

#### 2.4.2 测试引擎插件

运行在核心插件提供的基础设施上，提供测试环境。

1. [ ] 测试定义
2. [ ] 资源定义
3. [ ] 配置定义
4. [ ] 显示定义
